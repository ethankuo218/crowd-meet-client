<app-header [defaultHref]="'app/history'"></app-header>
<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <main class="history-area main-area">
    <mat-tab-group>
      <mat-tab>
        <ng-template mat-tab-label> Upcoming </ng-template>
        <br />
        <div
          class="joiner-list-content"
          *ngFor="let item of upcoming$ | async; trackBy: trackByIndex"
        >
          <div class="joiner-list-image">
            <img
              [src]="item.imageUrl || 'assets/images/spoon.png'"
              alt="image"
            />
          </div>
          <div
            class="upcoming-content"
            [routerLink]="['/app/event/list', item.eventId]"
          >
            <div class="content-row">
              <small class="dark_dd">{{
                item.startTime | date : 'EEE, MMM d, y'
              }}</small>
            </div>
            <p class="dark">
              {{ item.title }}
            </p>
            <p class="content dark_dd">
              {{ item.description }}
            </p>
          </div>
          <div class="tool_btn">
            <button id="menu" (click)="openMenu(item.eventId, item.creatorId)">
              <fa-icon [icon]="['fas', 'ellipsis-vertical']"></fa-icon>
            </button>
          </div>
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label> Joined </ng-template>
        <br />
        <div
          class="joiner-list-content"
          *ngFor="let item of joined$ | async; trackBy: trackByIndex"
        >
          <div class="joiner-list-image">
            <img
              [src]="item.imageUrl || 'assets/images/spoon.png'"
              alt="image"
            />
          </div>
          <div class="joined-content">
            <div class="content-row">
              <small class="dark_dd">{{
                item.startTime | date : 'EEE, MMM d, y'
              }}</small>
              <div *ngIf="getIsOngoing(item.endTime)" class="tag">Ongoing</div>
            </div>
            <p class="dark">
              {{ item.title }}
            </p>
            <hr>
            <div class="button-area">
              <ion-button [routerLink]="['/app/event/list', item.eventId]">View</ion-button>
              <ion-button [routerLink]="['/app/history/reviews', item.eventId]">Rating</ion-button>
            </div>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </main>
</ion-content>
